---
title: "オリジナルフォントを学習する"
---

このChapterでは、オリジナルフォントから文字認識時に使用する学習データを作成していく。基本的な流れとしては、以下の通り。
1. 学習する対象の文字もしくは文字列をテキストで準備する
1. `jTessBoxEditor`上にて該当フォントで`Tesseract`の学習で使用する事前(box)データを作成する。
1. `jTessBoxEditor`上にてboxデータを編集する
1. boxデータを使って`jTessBoxEditor`経由で`Tesseract`を使って学習する

# 学習する文字・文字列の準備🖊
文字認識をする際には、文字単体の認識と同様に文字の組み合わせ等も学習しておくと、認識時の精度が上がると思われる。よって、どのような文字や文字列、文章を学習させるかによって、最終的な精度の違いが生まれることになる。`jTessBoxEditor`では、何を学習させるかをテキストで指定することになっているので、そのファイルを準備したい。

今回のZTMYフォントはその性質上、組み合わせはほとんど不要なので、以下のように、対応している文字をすべて列挙する形をとった[(実際のテキストファイル)](https://github.com/tetunori/ztmy-font-decoder/blob/main/experiment/20240831/ztmy-chars.txt)。今回は`ztmy-chars.txt`という名前でどこかに保存しておいたとする。

![](/images/20240907-tetunori-tesseract/07.png)
*学習する文字の指定*

ただ、上記をみてわかるように、ただ列挙しているだけでなく、いくつか工夫した点がある。一見簡単にならべただけの様にみえるが、`Tesseract`の学習がブラックボックス化されている(AI共通の課題)ので、学習結果や精度をみてからまたここに戻ってきて、テキストを変更して、、、の繰り返しが必要で、ある程度の時間を要した。

## 学習対象テキストの工夫点💡
- 文字同士は１文字毎の切れ目がわかりやすいようにスペースで分割
- 文字の配置によって、`Tesseract`から学習対象と認識されない場合がある。この際は、文字を別の場所に移動してみると解決することがあった。`、`, `。`, `韮`, `強`などがそれにあたる。
- ZTMYフォントのオフィシャルな使われ方を見ていると、`イイ`がリガチャと思えるほど近接して配置されることがあったので、ここのみ文字列として学習できるようにしている。
- ZTMYフォントにおいて`ォ`と`オ`が同一形状になってしまう(仕様バグ)ので、`ォ`を学習対象から外した。

# 事前(box)データを作成する📦

# boxデータを編集する📝

# 学習する🧑‍🏫

